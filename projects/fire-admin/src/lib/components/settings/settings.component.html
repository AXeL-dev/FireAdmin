<fa-layout>
  <div class="row">
    <div class="col-lg-8 mx-auto mt-4">
      <!-- Settings Card -->
      <div class="card card-small edit-user-details mb-4">
        <div class="card-header p-0"></div>
        <div class="card-body p-0">
          <div class="border-bottom clearfix d-flex">
            <ul class="nav nav-tabs border-0 mt-auto mx-4 pt-2">
              <li class="nav-item">
                <a class="nav-link active" data-toggle="tab" href="#general">{{ 'General' | translate }}</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" data-toggle="tab" href="#internationalization">{{ 'Internationalization' | translate }}</a>
              </li>
            </ul>
          </div>
          <div class="tab-content py-4">
            <div class="form-row mx-4 tab-pane fade show active" id="general">
              <div class="col-lg-10">
                <div class="form-row">
                  <div class="form-group col-md-6">
                    <label for="language">{{ 'Language' | translate }}</label>
                    <select class="custom-select" [(ngModel)]="settings.language" name="language" id="language">
                      <option value="en">{{ 'English' | translate }}</option>
                    </select>
                  </div>
                  <div class="form-group col-md-6">
                    <label for="sidebarStyle">{{ 'SidebarStyle' | translate }}</label>
                    <fa-button-group
                      [(value)]="settings.sidebarStyle"
                      [options]="['Expanded', 'Collapsed', 'HeaderBar']"
                      [values]="['expanded', 'collapsed', 'headerbar']"
                    ></fa-button-group>
                    <!-- <select class="custom-select" [(ngModel)]="settings.sidebarStyle" name="sidebarStyle" id="sidebarStyle">
                      <option value="expanded">{{ 'Expanded' | translate }}</option>
                      <option value="collapsed">{{ 'Collapsed' | translate }}</option>
                      <option value="headerbar">{{ 'HeaderBar' | translate }}</option>
                    </select> -->
                  </div>
                </div>
              </div>
            </div>
            <div class="form-row mx-4 tab-pane fade" id="internationalization">
              <div class="col-lg-12">
                <div class="form-row">
                  <div class="form-group col-md-10">
                    <label for="language">{{ 'SupportedLanguages' | translate }}</label>
                    <ul class="list-group list-group-flush">
                      <li class="list-group-item px-0 pb-2">
                        <div *ngFor="let lang of settings.supportedLanguages; let i = index" class="custom-control custom-checkbox mb-1">
                          <input type="checkbox" class="custom-control-input" [id]="'lang' + i" [checked]="lang.isActive"
                            (click)="settings.getActiveSupportedLanguages()?.length < 2 && lang.isActive ? $event.preventDefault() : return"
                            (change)="lang.isActive = $event.target.checked"
                          >
                          <label class="custom-control-label" [for]="'lang' + i">{{ lang.label | translate }}</label>
                          <span *ngIf="lang.isRemovable" class="cursor-pointer ml-2" title="{{ 'Remove' | translate }}"
                            (click)="settings.getActiveSupportedLanguages()?.length > 1 || !lang.isActive ? settings.supportedLanguages.splice(i, 1) : return"
                          >
                            <i class="material-icons">remove_circle_outline</i>
                          </span>
                        </div>
                      </li>
                      <li class="list-group-item d-flex px-0">
                        <div class="input-group">
                          <input type="text" class="form-control" placeholder="{{ 'Language' | translate }}"
                            (input)="keyInput.value?.length < 2 && keyInput.value = langInput.value.substr(0, 2).toLowerCase()" #langInput>
                          <input type="text" class="form-control" placeholder="{{ 'Key' | translate }}"
                            (input)="!keyInput.value?.length && addLangButton.disabled = true" #keyInput>
                          <div class="input-group-append">
                            <button class="btn btn-white px-2" type="button"
                              title="{{ 'Add' | translate }}"
                              [disabled]="!langInput.value?.length || !keyInput.value?.length || settings.supportedLanguageExists(langInput.value, keyInput.value)"
                              (click)="settings.supportedLanguages.push({ label: langInput.value, key: keyInput.value, isActive: true, isRemovable: true }); langInput.value = keyInput.value = ''"
                              #addLangButton
                            >
                              <i class="material-icons">add</i>
                            </button>
                          </div>
                        </div>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="card-footer border-top">
          <span class="ml-auto d-table mr-3">
            <a [href]="navigation.getRouterLink('settings').join('/')" class="btn btn-sm btn-white mr-2">{{ 'Cancel' | translate }}</a>
            <a href="#" class="btn btn-sm btn-accent" (click)="saveChanges($event)">{{ 'SaveChanges' | translate }}</a>
          </span>
        </div>
      </div>
      <!-- End Settings Card -->
    </div>
  </div>
</fa-layout>
